<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<script type="text/javascript" src="../../Documents/My%20Web%20Sites/d3.v4.js"></script>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Untitled 3</title>
</head>

<body>

<button onclick="update(data1)">chemistry</button>
<button onclick="update(data2)">Biology</button>
<button onclick="update(data3)">Computer Science</button>
<button onclick="update(data4)">Mathematics</button>
<button onclick="update(data5)">Physics</button>
<button onclick="update(data6)">total</button>

<!-- Create a div where the graph will take place -->
<div id="my_dataviz"></div>
<script type="text/javascript">

// Create 2 datasets
var data1 = [
   {ser1: 16, ser2: 4500},
      {ser1: 17, ser2: 5200},
      {ser1: 18, ser2: 6100},
      {ser1: 19, ser2: 6000},
      {ser1: 20, ser2: 6500}];

var data2 = [
  
      {ser1: 16, ser2: 4700},
      {ser1: 17, ser2: 4300},
      {ser1: 18, ser2: 4500},
      {ser1: 19, ser2: 5000},
      {ser1: 20, ser2: 6500}];
      
 var data3 = [
  
   {ser1: 16, ser2: 3000},
      {ser1: 17, ser2: 3300},
      {ser1: 18, ser2: 4500},
      {ser1: 19, ser2: 4500},
      {ser1: 20, ser2: 4700}];
            
 var data4 = [
  
    {ser1: 16, ser2: 5000},
      {ser1: 17, ser2: 4866},
      {ser1: 18, ser2: 5800},
      {ser1: 19, ser2: 5900},
      {ser1: 20, ser2: 5500}];
      
      
     var data5 = [  
     {ser1:    16 , ser2:  4800 },
      {ser1:    17 , ser2:  4600 },
      {ser1:    18 , ser2:  5600 },
      {ser1:    19 , ser2:  5100 },
      {ser1:    20  , ser2:  5500 }];
   

// set the dimensions and margins of the graph
var margin = {top: 10, right: 30, bottom: 30, left: 50},
    width = 460 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;

// append the svg object to the body of the page
var svg = d3.select("#my_dataviz")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");

// Initialise a X axis:
var x = d3.scaleLinear().range([0,width]);
var xAxis = d3.axisBottom().scale(x);
svg.append("g")
  .attr("transform", "translate(0," + height + ")")
  .attr("class","myXaxis")

// Initialize an Y axis
var y = d3.scaleLinear().range([height, 0]);
var yAxis = d3.axisLeft().scale(y);
svg.append("g")
  .attr("class","myYaxis")

// Create a function that takes a dataset as input and update the plot:
function update(data) {

  // Create the X axis:
  x.domain([16, d3.max(data, function(d) { return d.ser1 }) ]);
  svg.selectAll(".myXaxis").transition()
    .duration(3000)
    .call(xAxis);

  // create the Y axis
  y.domain([1000, d3.max(data, function(d) { return d.ser2  }) ]);
  svg.selectAll(".myYaxis")
    .transition()
    .duration(3000)
    .call(yAxis);

  // Create a update selection: bind to the new data
  var u = svg.selectAll(".lineTest")
    .data([data], function(d){ return d.ser1 });

  // Updata the line
  u
    .enter()
    .append("path")
    .attr("class","lineTest")
    .merge(u)
    .transition()
    .duration(3000)
    .attr("d", d3.line()
      .x(function(d) { return x(d.ser1); })
      .y(function(d) { return y(d.ser2); }))
      .attr("fill", "none")
      .attr("stroke", "steelblue")
      .attr("stroke-width", 2.5)
}

// At the beginning, I run the update function on the first dataset:
update(data1)

</script>

</body>

</html>
